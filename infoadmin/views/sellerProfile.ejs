<%
  var catData = {};
  if(!profileData){}else{
    catData = profileData;
  }
%>
<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title> CarryLush Application Management | Dashboard</title>
      <% include partials/cms/cssList %>
   </head>
   <body class="hold-transition skin-blue sidebar-mini">
      <div class="wrapper">
         <% include partials/cms/header %>
         <%- include('partials/cms/leftNav',{catData : catData}) %>
         <!-- Content Wrapper. Contains page content -->
         <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <section class="content-header">
               <h1>
                 Profile
                  <small></small>
               </h1>
               <ol class="breadcrumb">
                  <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
                  <li class="active">Profile</li>
               </ol>
            </section>
            <!-- Main content -->
            <section class="content">

      <div class="row">
        <div class="col-md-3">
          <!-- Profile Image -->
          <div class="box box-primary">
            <div class="box-body box-profile">
              <img class="profile-user-img img-responsive img-circle" src="/cms/images/user2-160x160.jpg" alt="User profile picture">
              <h3 class="profile-username text-center"><%= catData.Profile.SellerName %></h3>
              <p class="text-muted text-center"><%= catData.Profile.StoreName %></p>
              <ul class="list-group list-group-unbordered">
                <li class="list-group-item">
                  <b>Products</b> <a class="pull-right">1,322</a>
                </li>
                <li class="list-group-item">
                  <b>Sales</b> <a class="pull-right">543</a>
                </li>
              </ul>
            </div>
          </div>
          <div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">About Me</h3>
            </div>
            <div class="box-body">
              <strong><i class="fa fa-map-marker margin-r-5"></i> Location</strong>
              <p class="text-muted"><%= catData.Profile.City +" "+catData.Profile.State %></p>
              <hr>
              <strong><i class="fa fa-pencil margin-r-5"></i>Categories</strong>
              <p>
                <span class="label label-danger">Fruites</span>
                <span class="label label-success">Vegitables</span>
                <!-- <span class="label label-info">Javascript</span>
                <span class="label label-warning">PHP</span>
                <span class="label label-primary">Node.js</span> -->
              </p>
              <hr>
              <strong><i class="fa fa-file-text-o margin-r-5"></i> Notes</strong>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam fermentum enim neque.</p>
            </div>
          </div>
        </div>
        <div class="col-md-9">
          <div class="nav-tabs-custom">
            <ul class="nav nav-tabs">
              <li class=""><a href="#personal" data-toggle="tab" aria-expanded="false">Personal Information</a></li>
              <li class=""><a href="#store" data-toggle="tab" aria-expanded="false">Store Information</a></li>
              <li class=""><a href="#tax" data-toggle="tab" aria-expanded="false">Tax Details</a></li>
              <li class=""><a href="#interview" data-toggle="tab" aria-expanded="false">Interview</a></li>
              <li class="active"><a href="#settings" data-toggle="tab" aria-expanded="true">Settings</a></li>
            </ul>
            <div class="tab-content">
              <div class="tab-pane" id="personal">
                <form id="frmUpdatePersonal" class="form-horizontal">
                  <input type="hidden" name="Id" value="<%= catData.Profile.Id %>" />
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">Name</label>
                    <div class="col-sm-10">
                      <input name="SellerName" value="<%= catData.Profile.SellerName %>" type="email" class="form-control" id="inputName" placeholder="Name">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputEmail" class="col-sm-2 control-label">Email</label>

                    <div class="col-sm-10">
                      <input type="email" name="Email" value="<%= catData.Profile.Email %>"  class="form-control" id="inputEmail" placeholder="Email">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">Phone</label>
                    <div class="col-sm-10">
                      <input type="text" name="Phone" value="<%= catData.Profile.Phone %>"  class="form-control" id="inputName" placeholder="Name">
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                      <button id="btnUpdatePersonal" type="submit" class="btn btn-danger">Update MY Personal Information</button>
                    </div>
                  </div>
                </form>
              </div>
              <div class="tab-pane" id="store">
                <form id="frmUpdateInformation" class="form-horizontal">
                  <input type="hidden" name="Id" value="<%= catData.Profile.Id %>" />
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">Store Name</label>
                    <div class="col-sm-10">
                      <input name="StoreName" value="<%= catData.Profile.StoreName %>" type="email" class="form-control" id="inputName" placeholder="Name">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputEmail" class="col-sm-2 control-label">Pincode</label>
                    <div class="col-sm-10">
                      <input type="email" name="Pincode" value="<%= catData.Profile.Pincode %>"  class="form-control" id="inputEmail" placeholder="Email">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">Address Line 1</label>
                    <div class="col-sm-10">
                      <input type="text" name="Address11" value="<%= catData.Profile.Address1 %>"  class="form-control" id="inputName" placeholder="Name">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">Address Line 2</label>
                    <div class="col-sm-10">
                      <input type="text" name="Address2" value="<%= catData.Profile.Address2 %>"  class="form-control" id="inputName" placeholder="Name">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">City</label>
                    <div class="col-sm-10">
                      <select name="City" class="form-control select2 select2-hidden-accessible" style="width: 100%;" tabindex="-1" aria-hidden="true">
                        <option value="Alabama" selected="selected">Alabama</option>
                        <option value="Alabama">Alaska</option>
                        <option value="California">California</option>
                        <option value="Delaware">Delaware</option>
                        <option value="Alabama">Tennessee</option>
                        <option value="Texas">Texas</option>
                        <option value="Washington">Washington</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">State</label>
                    <div class="col-sm-10">
                      <select name="State" class="form-control select2 select2-hidden-accessible" style="width: 100%;" tabindex="-1" aria-hidden="true">
                        <option value="Alabama" selected="selected">Alabama</option>
                        <option value="Alabama">Alaska</option>
                        <option value="California">California</option>
                        <option value="Delaware">Delaware</option>
                        <option value="Alabama">Tennessee</option>
                        <option value="Texas">Texas</option>
                        <option value="Washington">Washington</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                      <button id="btnUpdateInformation" type="submit" class="btn btn-danger">Update MY Store Information</button>
                    </div>
                  </div>
                </form>
              </div>
              <div class="tab-pane" id="tax">
                <form id="frmUpdateTax" class="form-horizontal">
                  <input type="hidden" name="Id" value="<%= catData.Profile.Id %>" />
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">Do you have GST Number?</label>
                    <div class="col-sm-10">
                      <span>
                        <input checked="<%= (catData.Profile.GST == 'Yes') ? 'checked' : 'false'%>" value="Yes" id="gst_yes" type="radio" name="GST" class="flat-red">
                        <label for="gst_yes">Yes</label>
                      </span>
                      <span>
                        <input checked="<%= (catData.Profile.GST == 'Yes') ? 'checked' : 'false'%>" value="No" id="gst_no" type="radio" name="GST" class="flat-red">
                        <label for="gst_no">No</label>
                      </span>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">City</label>
                    <div class="col-sm-10">
                      <select name="City" class="form-control select2 select2-hidden-accessible" style="width: 100%;" tabindex="-1" aria-hidden="true">
                        <option value="Alabama" selected="selected">Alabama</option>
                        <option value="Alabama">Alaska</option>
                        <option value="California">California</option>
                        <option value="Delaware">Delaware</option>
                        <option value="Alabama">Tennessee</option>
                        <option value="Texas">Texas</option>
                        <option value="Washington">Washington</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputEmail" class="col-sm-2 control-label">GSTIN</label>

                    <div class="col-sm-10">
                      <input type="email" name="ProvisonalGSTIN" value="<%= catData.Profile.ProvisonalGSTIN %>"  class="form-control" id="inputEmail" placeholder="Email">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">PAN Number</label>

                    <div class="col-sm-10">
                      <input type="text" name="PANNumber" value="<%= catData.Profile.PANNumber %>"  class="form-control" id="inputName" placeholder="Name">
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                      <button id="btnUupdateTax" type="submit" class="btn btn-danger">Update MY Tax Details</button>
                    </div>
                  </div>
                </form>
              </div>
              <div class="tab-pane" id="interview">
                <form id="frmUpdateInterview" class="form-horizontal">
                  <input type="hidden" name="Id" value="<%= catData.Profile.Id %>" />
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">Choosen Categories to sell?</label>
                    <div class="col-sm-10">
                      <select multiple data-placeholder="Select a State" name="Categories" style="width: 100%;" tabindex="-1" aria-hidden="true">

                        <%
                        catData.Category.forEach(function(data){
                        %>
                          <option value="<%= catData.data %>"><%= data.Name %></option>
                        <%
                        });
                        %>
                      </select>
                    </div>
                  </div>
                  <div class="form-group has-feedback">
                    <label for="inputName" class="col-sm-2 control-label">Where do you get products from?</label>
                    <div class="col-sm-10">
                      <span>
                        <input checked="<%= (catData.Profile.GST == 'Yes') ? 'checked' : 'false'%>" id="imanufacture" value="I Manufacture them" type="radio" name="GetProductFrom" class="flat-red">
                        <label for="imanufacture">
                          I Manufacture them
                        </label>
                      </span>
                      <span>
                        <input checked="<%= (catData.Profile.GST == 'Yes') ? 'checked' : 'false'%>" id="iimport" value="I Import Them" type="radio" name="GetProductFrom" class="flat-red">
                        <label for="iimport">
                          I Import Them
                        </label>
                      </span>
                      <span>
                        <input checked="<%= (catData.Profile.GST == 'Yes') ? 'checked' : 'false'%>" id="iresellproduct" value="I Resell Product That Buy" type="radio" name="GetProductFrom" class="flat-red">
                        <label for="iresellproduct">
                          I Resell Product That Buy
                        </label>
                      </span>
                    </div>
                  </div>
                  <div class="form-group has-feedback">
                    <label for="inputName" class="col-sm-2 control-label">What is your anual turn over?</label>
                    <div class="col-sm-10">
                      <span>
                        <input checked="<%= (catData.Profile.GST == 'Yes') ? 'checked' : 'false'%>" id="anualIncomeBelow10" value="below 10 lakh" type="radio" name="AnualIncome" class="flat-red">
                        <label for="anualIncomeBelow10">
                          Below 10 Lakh
                        </label>
                      </span>
                      <span>
                        <input checked="<%= (catData.Profile.GST == 'Yes') ? 'checked' : 'false'%>" id="anualIncomeAbove10" type="radio" value="above 10 lakh" name="AnualIncome" class="flat-red">
                        <label for="anualIncomeAbove10">
                          Above 10 Lakh
                        </label>
                      </span>
                    </div>

                  </div>
                  <div class="form-group has-feedback">
                    <label for="inputName" class="col-sm-2 control-label">Do you sell in other website?</label>
                    <div class="col-sm-10">
                      <span>
                        <input checked="<%= (catData.Profile.GST == 'Yes') ? 'checked' : 'false'%>" id="SellingOtherSiteYes" value="Yes" type="radio" name="SellingOtherWebsite" class="flat-red">
                        <label for="SellingOtherSiteYes">
                          Yes
                        </label>
                      </span>
                      <span>
                        <input checked="<%= (catData.Profile.GST == 'Yes') ? 'checked' : 'false'%>" id="SellingOtherSiteNo" value="No" type="radio" name="SellingOtherWebsite" class="flat-red">
                        <label for="SellingOtherSiteNo">
                          No
                        </label>
                      </span>
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                      <button id="btnUpdateInterview" type="submit" class="btn btn-danger">Update MY Interview</button>
                    </div>
                  </div>
                </form>
              </div>
              <div class="tab-pane active" id="settings">
                <form id="frmUpdatePassword" class="form-horizontal">
                  <input type="hidden" name="Id" value="<%= catData.Profile.Id %>" />
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">Password</label>
                    <div class="col-sm-10">
                      <input value="<%= catData.Profile.Password %>" type="email" class="form-control" id="inputName" placeholder="Name">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputEmail" class="col-sm-2 control-label">New Paddword</label>

                    <div class="col-sm-10">
                      <input type="email" name="Password" value="<%= catData.Profile.Email %>"  class="form-control" id="inputEmail" placeholder="Email">
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="inputName" class="col-sm-2 control-label">Conform Password</label>

                    <div class="col-sm-10">
                      <input type="text" name="Phone" value="<%= catData.Profile.Phone %>"  class="form-control" id="inputName" placeholder="Name">
                    </div>
                  </div>
                  <div class="form-group">
                    <div class="col-sm-offset-2 col-sm-10">
                      <button id="btnUpdatePassword" type="submit" class="btn btn-danger">Update MY Password</button>
                    </div>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>

    </section>
         </div>
         <% include partials/cms/footer %>
      </div>
      <% include partials/cms/jsList %>
      <script type="text/javascript">
        var Profile = (function(){
          /*Main Functions*/
          var refreshAll = function(){
            setTimeout(function(){
              location.reload();
            } , 0);
          }
          var getAjaxResponse = function(Url,Data,method,callbackFun){
            $.ajax({
              method: method,
              url: Url,
              data: Data
            }).done(function( msg ) {
              callbackFun(msg);
            });
          }
          var resSteps = function(data){
            if(data!=null){
              if(data.status){
                refreshAll();
              }else{
                alert(data.data);
              }
            }
          }
          var updateProfile = function(_this){
            var data = {};
            data = _this.parents('form').serializeArray();
            getAjaxResponse("/updateSeller" , data ,"post", resSteps);
          }
          var changeAprovalStatus = function(_this){
            var data = {};
            data.sellerId = _this.attr('data-sellerId');
            data.AprovalStatus = _this.attr('data-status');
            getAjaxResponse("/aproveSeller" , data ,"post", resSteps);
          }


          /*Binding Functions*/
          var bindEvent = (function(){
            /*update Profile*/
            $('#btnUpdatePassword , #btnUupdateTax , #btnUpdatePersonal , #btnUpdateInterview , #btnUpdateInformation').on('click' , function(){
              updateProfile($(this));
            })
            /*Registration Step1*/
            $('#blockSeller , #aproveSeller').on('click' , function(){
              changeAprovalStatus($(this));
            })
            
          })();
        });
        Profile();
      </script>
   </body>
</html>
